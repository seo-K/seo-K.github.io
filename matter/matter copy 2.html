<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Matter.js 예제</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.18.0/matter.min.js"></script>
    <style>
      /* CSS 리셋 */
      html,
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
      }

      #myCanvas {
        /* width: 100vw;
        height: 100vh; */
        display: block;
      }
    </style>
  </head>
  <body>
    <canvas id="myCanvas" style="width: 100%; height: 100vh"></canvas>

    <script>
      // module aliases
      let Engine = Matter.Engine,
        World = Matter.World,
        Bodies = Matter.Bodies,
        Mouse = Matter.Mouse,
        MouseConstraint = Matter.MouseConstraint;

      // create an engine
      let engine = Engine.create();

      // create a renderer
      let render = Matter.Render.create({
        canvas: document.getElementById("myCanvas"), // 캔버스 요소 지정
        engine: engine, // Matter.Engine 인스턴스
        options: {
          wireframes: false,
        },
      });

      // 1. 대지 생성
      // 바운더리 생성 [ 시뮬레이션 영역의 크기와 관련된 정보를 포함하는 객체 ]
      let bounds = {
        length: window.innerWidth, // 뷰포트의 가로값을 사용
        thickness: window.innerHeight, // 뷰포트의 세로값을 사용
        properties: {
          // 바운더리의 속성
          isStatic: true, // 정적인 바운더리로 지정
        },
      };

      // 물체가 움직일 수 있는 영역
      let boundary = Bodies.rectangle(
        bounds.length / 2, // x 좌표
        window.innerHeight - bounds.thickness / 2, // y 좌표
        bounds.length, // 너비
        bounds.thickness, // 높이
        {
          // 바운더리의 속성
          isStatic: true, // 정적인 바운더리로 지정
          render: {
            fillStyle: "#202020", // 채우기 색상을 지정
          },
        }
      );

      // create two boxes and a ground
      let boxA = Bodies.rectangle(505, 370, 80, 80); // 가로 중앙 505, 세로 중앙 370
      let boxB = Bodies.rectangle(555, 320, 90, 90); // 가로 중앙 555, 세로 중앙 320
      let circle = Bodies.circle(455, 420, 30); // 가로 중앙 455, 세로 중앙 420
      let polygon = Bodies.polygon(355, 470, 5, 50); // 가로 중앙 355, 세로 중앙 470
      let trapezoid = Bodies.trapezoid(505, 370, 80, 100, 0.5); // 가로 중앙 505, 세로 중앙 370

      let ground = Bodies.rectangle(400, 610, 810, 60, {
        isStatic: true,
        render: {
          fillStyle: "#00FF00", // green color
        },
      });

      // add all of the bodies to the world
      World.add(engine.world, [
        boundary,
        boxA,
        boxB,
        circle,
        polygon,
        trapezoid,
        ground,
      ]);

      // create a mouse
      let mouse = Mouse.create(render.canvas);

      // 마우스 제약 생성
      // create mouse constraint
      let mouseConstraint = MouseConstraint.create(engine, {
        mouse: mouse,
      });

      // add mouse constraint to the world
      World.add(engine.world, mouseConstraint);

      // run the renderer
      Matter.Render.run(render);

      // create runner
      let runner = Matter.Runner.create();

      // run the engine
      Matter.Runner.run(runner, engine);
    </script>
  </body>
</html>
